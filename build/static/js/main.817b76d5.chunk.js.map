{"version":3,"sources":["components/SearchBox.js","components/LinkListItem.js","components/LinkList.js","components/WarningBanner.js","components/App.js","views/404.js","components/AppRouter.js","index.js"],"names":["SearchBox","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","isValidURL","string","match","handleSubmit","longURL","onSubmit","setState","onError","state","urlInput","React","createRef","prevProps","prevState","current","focus","button","_this2","loading","react_default","a","createElement","className","type","disabled","role","aria-hidden","e","preventDefault","autoFocus","ref","placeholder","value","onChange","target","Component","LinkListItem","pageTitle","href","includes","concat","rel","style","textDecoration","shortURL","marginLeft","onClick","el","document","body","appendChild","select","execCommand","removeChild","copyToClipboard","LinkList","nextProps","nextState","history","length","slice","map","link","i","components_LinkListItem","id","hash","key","WarningBanner","warn","borderRadius","message","App","showWarning","setTimeout","isLoading","handleSearchSubmit","_ref","asyncToGenerator","regenerator_default","mark","_callee","result","wrap","_context","prev","next","axios","post","process","sent","data","toConsumableArray","t0","stop","_x","apply","arguments","components_WarningBanner","components_SearchBox","components_LinkList","NotFound","AppRouter","react_router_dom","react_router","exact","path","component","ReactDOM","render","components_AppRouter","querySelector"],"mappings":"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","file":"static/js/main.817b76d5.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nclass SearchBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { longURL: \"\" };\r\n    this.urlInput = React.createRef();\r\n  }\r\n\r\n  // https://stackoverflow.com/a/49849482\r\n  isValidURL = string => {\r\n    var res = string.match(\r\n      /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/g\r\n    );\r\n    return res == null ? false : true;\r\n  };\r\n\r\n  handleSubmit = longURL => {\r\n    if (longURL === \"\") {\r\n      return;\r\n    }\r\n\r\n    if (!this.isValidURL(longURL)) {\r\n      this.props.onError(\"Unable to shorten that link. It is not a valid url.\");\r\n\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(longURL);\r\n    this.setState({ longURL: \"\" });\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    this.urlInput.current.focus();\r\n  }\r\n\r\n  render() {\r\n    let button;\r\n    if (this.props.loading) {\r\n      button = (\r\n        <button className=\"btn btn-primary\" type=\"button\" disabled>\r\n          <span\r\n            className=\"spinner-border spinner-border-sm\"\r\n            role=\"status\"\r\n            aria-hidden=\"true\"\r\n          />\r\n          <span className=\"sr-only\">Loading...</span>\r\n        </button>\r\n      );\r\n    } else {\r\n      button = (\r\n        <button type=\"submit\" className=\"btn btn-info\">\r\n          SHORTEN\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <form\r\n        onSubmit={e => {\r\n          e.preventDefault();\r\n          this.handleSubmit(this.state.longURL);\r\n        }}\r\n      >\r\n        <div className=\"row justify-content-center mt-5 mb-5\">\r\n          <div className=\"col-sm-10\">\r\n            <div className=\"input-group\">\r\n              <input\r\n                autoFocus={true}\r\n                ref={this.urlInput}\r\n                className=\"form-control\"\r\n                type=\"text\"\r\n                placeholder=\"Paste a link to shorten it\"\r\n                value={this.state.longURL}\r\n                onChange={e => this.setState({ longURL: e.target.value })}\r\n              />\r\n              <div className=\"input-group-append\">{button}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBox;\r\n","import React from \"react\";\r\n\r\nconst LinkListItem = props => {\r\n  function handleLinkProtocol(longURL) {\r\n    let redirectLink =\r\n      longURL.includes(\"http://\") || longURL.includes(\"https://\")\r\n        ? longURL\r\n        : `http://${longURL}`;\r\n\r\n    return redirectLink;\r\n  }\r\n\r\n  function copyToClipboard(shortURL) {\r\n    const el = document.createElement(\"textarea\");\r\n    el.value = shortURL;\r\n    document.body.appendChild(el);\r\n    el.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(el);\r\n  }\r\n\r\n  return (\r\n    <div className=\"list-group-item\">\r\n      <ul className=\"list-unstyled mb-0\">\r\n        <li>{props.pageTitle}</li>\r\n        <li className=\"pb-2\">\r\n          <a\r\n            href={handleLinkProtocol(props.longURL)}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            style={{ textDecoration: \"none\" }}\r\n          >\r\n            <small className=\"text-muted\">{props.longURL}</small>\r\n          </a>\r\n        </li>\r\n        <li className=\"text-info\">\r\n          {props.shortURL}\r\n          <button\r\n            className=\"btn btn-sm btn-outline-info\"\r\n            style={{ marginLeft: \"15px\" }}\r\n            onClick={e => {\r\n              copyToClipboard(props.shortURL);\r\n            }}\r\n          >\r\n            COPY\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LinkListItem;\r\n","import React from \"react\";\r\nimport LinkListItem from \"./LinkListItem\";\r\n\r\nclass LinkList extends React.Component {\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.history.length !== this.props.history.length) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    if (this.props.history.length < 1) {\r\n      return null;\r\n    }\r\n\r\n    return this.props.history.slice(0, 5).map((link, i) => {\r\n      return (\r\n        <LinkListItem\r\n          id={link.hash + i}\r\n          key={link.hash + i}\r\n          longURL={link.longURL}\r\n          shortURL={link.shortURL}\r\n          pageTitle={link.pageTitle}\r\n        />\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nexport default LinkList;\r\n","import React from \"react\";\r\n\r\nconst WarningBanner = props => {\r\n  if (!props.warn) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"alert alert-danger fixed-top\" style={{ borderRadius: \"0\" }}>\r\n      <small>{props.message}</small>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WarningBanner;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport SearchBox from \"./SearchBox\";\r\nimport LinkList from \"./LinkList\";\r\nimport WarningBanner from \"./WarningBanner\";\r\n\r\nimport \"../styles/custom.css\";\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      history: [],\r\n      showWarning: false,\r\n      message: \"\",\r\n      isLoading: false\r\n    };\r\n  }\r\n\r\n  showWarning = message => {\r\n    this.setState({ showWarning: true, message });\r\n    setTimeout(() => {\r\n      this.setState({\r\n        showWarning: false,\r\n        message: \"\",\r\n        isLoading: false\r\n      });\r\n    }, 3000);\r\n  };\r\n\r\n  handleSearchSubmit = async longURL => {\r\n    try {\r\n      this.setState({ isLoading: true });\r\n      const result = await axios.post(\r\n        `${process.env.REACT_APP_API_HOST}/api/shorten`,\r\n        { longURL }\r\n      );\r\n\r\n      let link = {\r\n        longURL: result.data.longURL,\r\n        shortURL: result.data.shortURL,\r\n        hash: result.data.hash,\r\n        pageTitle: result.data.pageTitle\r\n      };\r\n\r\n      this.setState({\r\n        history: [link, ...this.state.history],\r\n        isLoading: false\r\n      });\r\n    } catch (err) {\r\n      this.showWarning(err.message);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <WarningBanner\r\n          warn={this.state.showWarning}\r\n          message={this.state.message}\r\n        />\r\n        <div className=\"jumbotron jumbotron-fluid\">\r\n          <div className=\"container\">\r\n            <SearchBox\r\n              onSubmit={this.handleSearchSubmit}\r\n              loading={this.state.isLoading}\r\n              onError={this.showWarning}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"container\">\r\n          <div className=\"list-group mt-n5 pb-3\">\r\n            <LinkList history={this.state.history} />\r\n          </div>\r\n        </div>\r\n        <footer className=\"footer\">\r\n          <div className=\"container\">\r\n            <span className=\"text-muted\">\r\n              <small>Desarrollado por Carlos Lozano</small>\r\n            </span>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\n\r\nconst NotFound = props => {\r\n    return <div>404 not found.</div>;\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport NotFound from \"../views/404\";\r\n\r\nconst AppRouter = () => {\r\n  return (\r\n    <Router>\r\n      <div>\r\n        <Route exact path=\"/\" component={App} />\r\n        <Route exact path=\"/not-found\" component={NotFound} />\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport AppRouter from \"./components/AppRouter\";\r\n\r\nReactDOM.render(<AppRouter />, document.querySelector(\"#root\"));\r\n"],"sourceRoot":""}